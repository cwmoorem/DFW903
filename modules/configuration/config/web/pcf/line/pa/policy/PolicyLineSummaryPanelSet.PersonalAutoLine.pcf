<?xml version="1.0"?>
<PCF
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="../../../../../../../pcf.xsd">
  <PanelSet
    id="PolicyLineSummaryPanelSet"
    mode="PersonalAutoLine">
    <Require
      name="line"
      type="PolicyLine"/>
    <Require
      name="jobWizardHelper"
      type="gw.api.web.job.JobWizardHelper"/>
    <PanelRef>
      <TitleBar
        title="line.Pattern.DisplayName"/>
      <Toolbar/>
      <PanelSet>
        <DetailViewPanel
          id="lineDV">
          <InputColumn>
            <Label
              label="DisplayKey.get(&quot;Web.Policy.PA.Quote.Coverages.Line&quot;)"/>
            <ListViewInput
              def="CoverageSummaryLV((line as PersonalAutoLine).PALineCoverages.toList(), (line as PersonalAutoLine))"
              labelAbove="true">
              <Toolbar/>
            </ListViewInput>
          </InputColumn>
        </DetailViewPanel>
        <DetailViewPanel
          visible="(line as PersonalAutoLine).GarageLocations.HasElements">
          <InputColumn>
            <Label
              label="DisplayKey.get(&quot;Web.Policy.PA.Quote.Coverages.VehicleCoverages&quot;)"/>
          </InputColumn>
        </DetailViewPanel>
        <!-- Show Vehicle related information, such as garage location and the vehicle's clauses -->
        <PanelIterator
          elementName="location"
          value="(line as PersonalAutoLine).GarageLocations"
          valueType="entity.PolicyLocation[]">
          <IteratorSort
            sortBy="location.LocationNum"
            sortOrder="1"/>
          <DetailViewPanel>
            <InputColumn>
              <Label
                label="DisplayKey.get(&quot;Web.Policy.PA.Garage&quot;, location.LocationNum, location.CompactName)"/>
            </InputColumn>
          </DetailViewPanel>
          <PanelIterator
            elementName="vehicle"
            value="(line as PersonalAutoLine).Vehicles.where(\avehicle -&gt; avehicle.GarageLocation == location)"
            valueType="entity.PersonalVehicle[]">
            <IteratorSort
              sortBy="vehicle.VehicleNumber"
              sortOrder="1"/>
            <PanelSet>
              <PanelRef
                id="vehiclepanel">
                <TitleBar
                  title="DisplayKey.get(&quot;Web.Policy.BA.Review.VehicleNumber&quot;, vehicle.VehicleNumber)"/>
                <DetailViewPanel>
                  <InputColumn>
                    <TextInput
                      boldLabel="true"
                      id="Vin"
                      label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Vin&quot;)"
                      value="vehicle.Vin"/>
                  </InputColumn>
                  <InputColumn>
                    <TextInput
                      boldLabel="true"
                      id="Year"
                      label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Year&quot;)"
                      value="vehicle.Year"
                      valueType="java.lang.Integer"/>
                  </InputColumn>
                  <InputColumn>
                    <TextInput
                      boldLabel="true"
                      id="Make"
                      label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Make&quot;)"
                      value="vehicle.Make"/>
                  </InputColumn>
                  <InputColumn>
                    <TextInput
                      boldLabel="true"
                      id="Model"
                      label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Model&quot;)"
                      value="vehicle.Model"/>
                  </InputColumn>
                </DetailViewPanel>
              </PanelRef>
              <DetailViewPanel>
                <InputColumn>
                  <TextInput
                    boldLabel="true"
                    id="drivername"
                    label="DisplayKey.get(&quot;Web.Policy.PA.PrimaryDriver&quot;)"
                    value="vehicle.PrimaryDriver.DisplayName"/>
                </InputColumn>
                <InputColumn>
                  <Label
                    id="Gooddriverdiscount"
                    label="DisplayKey.get(&quot;Web.Policy.PA.GoodDriverDiscountApplies&quot;)"
                    visible="vehicle.PrimaryDriver.PolicyDriver.ApplicableGoodDriverDiscount"/>
                </InputColumn>
              </DetailViewPanel>
              <DetailViewPanel>
                <InputColumn>
                  <Label
                    label="DisplayKey.get(&quot;Web.Policy.PA.AssignedDrivers&quot;)"/>
                  <ListViewInput
                    labelAbove="true">
                    <Toolbar/>
                    <ListViewPanel
                      id="DriverPctLV">
                      <RowIterator
                        editable="false"
                        elementName="driver"
                        hideCheckBoxesIfReadOnly="true"
                        value="vehicle.Drivers"
                        valueType="entity.VehicleDriver[]">
                        <Row>
                          <TextCell
                            footerLabel="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Driver.Total&quot;)"
                            id="Driver"
                            label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Driver.Driver&quot;)"
                            validationExpression=""
                            value="driver.PolicyDriver.DisplayName"/>
                          <TextCell
                            footerSumValue="driver.PercentageDriven"
                            id="Percentage"
                            label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Driver.Percentage&quot;)"
                            value="driver.PercentageDriven"
                            valueType="java.lang.Integer"/>
                        </Row>
                      </RowIterator>
                    </ListViewPanel>
                  </ListViewInput>
                </InputColumn>
              </DetailViewPanel>
              <DetailViewPanel>
                <InputColumn>
                  <Label
                    label="DisplayKey.get(&quot;Web.Policy.PA.VehicleRateModifiers&quot;)"/>
                </InputColumn>
              </DetailViewPanel>
              <DetailViewPanel>
                <InputColumn>
                  <ListViewInput
                    labelAbove="true">
                    <Toolbar/>
                    <ListViewPanel>
                      <Row
                        renderAsSmartHeader="true">
                        <CellIterator
                          elementName="modifiername"
                          id="modnameiterator"
                          value="vehicle.Modifiers"
                          valueType="entity.Modifier[]">
                          <IteratorSort
                            sortBy="modifiername.Pattern.Priority"
                            sortOrder="1"/>
                          <TextCell
                            id="vehmodifiername"
                            value="modifiername.Pattern.DisplayName"
                            width="200"/>
                        </CellIterator>
                      </Row>
                      <Row>
                        <CellIterator
                          elementName="modifier"
                          id="moditerator"
                          value="vehicle.Modifiers"
                          valueType="entity.Modifier[]">
                          <ModifierCell
                            id="vehiclemodifiercell"
                            value="modifier"/>
                        </CellIterator>
                      </Row>
                    </ListViewPanel>
                  </ListViewInput>
                </InputColumn>
              </DetailViewPanel>
              <DetailViewPanel>
                <InputColumn>
                  <Label
                    label="DisplayKey.get(&quot;Web.Policy.PA.VehicleCoverages&quot;)"/>
                </InputColumn>
              </DetailViewPanel>
              <DetailViewPanel
                id="vehiclecovDV">
                <InputColumn>
                  <ListViewInput
                    def="CoverageSummaryLV(vehicle.Coverages.toList(), vehicle)"
                    labelAbove="true">
                    <Toolbar/>
                  </ListViewInput>
                </InputColumn>
              </DetailViewPanel>
            </PanelSet>
          </PanelIterator>
        </PanelIterator>
        <PanelRef>
          <TitleBar
            title="DisplayKey.get(&quot;Web.Policy.PA.ExclusionsAndConditions&quot;)"
            visible="((line as PersonalAutoLine).PolicyDrivers.where(\ dr -&gt; dr.Excluded).HasElements) or (!(line.AllExclusions.IsEmpty)) or (!(line.AllConditions.IsEmpty))"/>
          <DetailViewPanel
            visible="(line as PersonalAutoLine).PolicyDrivers.where(\ dr -&gt; dr.Excluded).HasElements">
            <InputColumn>
              <Label
                label="DisplayKey.get(&quot;Web.Policy.PA.ExcludedDrivers&quot;)"/>
              <ListViewInput
                labelAbove="true">
                <Toolbar/>
                <ListViewPanel
                  id="excludedDriverLV">
                  <RowIterator
                    editable="false"
                    elementName="excludedDriver"
                    hideCheckBoxesIfReadOnly="true"
                    value="(line as PersonalAutoLine).PolicyDrivers.where(\ dr -&gt; dr.Excluded)"
                    valueType="entity.PolicyDriver[]">
                    <Row>
                      <TextCell
                        id="Driver"
                        label="DisplayKey.get(&quot;Web.PolicyLine.Vehicle.Driver.Driver&quot;)"
                        validationExpression=""
                        value="excludedDriver.DisplayName"/>
                    </Row>
                  </RowIterator>
                </ListViewPanel>
              </ListViewInput>
            </InputColumn>
          </DetailViewPanel>
        </PanelRef>
        <DetailViewPanel>
          <InputColumn>
            <Label
              label="DisplayKey.get(&quot;Web.Policy.Coverages.Exclusions&quot;)"
              visible="!(line.AllExclusions.IsEmpty)"/>
            <ListViewInput
              def="CoverageSummaryLV(line.AllExclusions.toList(), null)"
              id="exclusionSummaryLV"
              labelAbove="true"
              visible="!(line.AllExclusions.IsEmpty)">
              <Toolbar/>
            </ListViewInput>
            <Label
              label="DisplayKey.get(&quot;Web.Policy.Coverages.PolicyConditions&quot;)"
              visible="!(line.AllConditions.IsEmpty)"/>
            <ListViewInput
              def="CoverageSummaryLV(line.AllConditions.toList(), null)"
              id="conditionSummaryLV"
              labelAbove="true"
              visible="!(line.AllConditions.IsEmpty)">
              <Toolbar/>
            </ListViewInput>
          </InputColumn>
        </DetailViewPanel>
      </PanelSet>
    </PanelRef>
  </PanelSet>
</PCF>