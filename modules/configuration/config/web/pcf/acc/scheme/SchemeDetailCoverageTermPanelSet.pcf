<?xml version="1.0"?>
<PCF
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="../../../../../../pcf.xsd">
  <PanelSet
    id="SchemeDetailCoverageTermPanelSet">
    <Require
      name="pageProcess"
      type="acc.pc.scheme.pageprocess.SchemeDetailPageProcess"/>
    <PanelRef
      available="pageProcess.scheme.isEditable()">
      <Toolbar>
        <IteratorButtons
          addVisible="true"
          id="CoverageTermschemeDetailAdd"
          iterator="CoverageTermschemeDetailIterator"
          removeVisible="true"/>
        <ToolbarDivider/>
        <CheckedValuesToolbarButton
          checkedRowAction="pageProcess.cloneDetail(schemeWrapper)"
          id="CoverageTermclonebutton"
          iterator="CoverageTermschemeDetailIterator"
          label="&quot;Clone&quot;"/>
      </Toolbar>
      <ListViewPanel
        available="true"
        editable="true">
        <RowIterator
          checkBoxVisible="true"
          editable="true"
          elementName="schemeWrapper"
          id="CoverageTermschemeDetailIterator"
          pageSize="0"
          toCreateAndAdd="pageProcess.addDetail(SchemeSourceType_Ext.TC_COVERAGETERM)"
          toRemove="pageProcess.removeDetail(schemeWrapper)"
          type="acc.pc.scheme.pageprocess.SchemeDetailPageProcess.SchemeDetailWrapper"
          value="pageProcess.schemeDetailWrappers?.where(\ s -&gt; s.schemeDetail.SchemeSourceType == SchemeSourceType_Ext.TC_COVERAGETERM)"
          valueType="java.util.List&lt;acc.pc.scheme.pageprocess.SchemeDetailPageProcess.SchemeDetailWrapper&gt;">
          <ToolbarFlag
            name="selectedSchemeDetail"/>
          <IteratorSort
            sortBy="schemeWrapper.localCoverage"
            sortOrder="1"/>
          <IteratorSort
            sortBy="schemeWrapper.localCoverageTerm"
            sortOrder="2"/>
          <IteratorSort
            sortBy="schemeWrapper.schemeDetail.SchemeActionType"
            sortOrder="3"/>
          <IteratorSort
            sortBy="schemeWrapper.schemeDetail.SchemeValueType"
            sortOrder="4"/>
          <Row>
            <TextCell
              align="center"
              bold="true"
              fontColor="&quot;Red&quot;"
              id="indicatorcell"
              value="pageProcess.indicateClone(schemeWrapper)"/>
            <RangeCell
              editable="true"
              id="schemeDetailParent"
              label="&quot;Parent&quot;"
              optionLabel="VALUE.name"
              required="true"
              value="schemeWrapper.localCoverage"
              valueRange="pageProcess.coverages.where(\ l -&gt; l.terms.Count &gt; 0)"
              valueType="acc.pc.scheme.pageprocess.SchemeDetailPageProcess.LocalCoverage">
              <PostOnChange/>
            </RangeCell>
            <RangeCell
              editable="true"
              id="schemeDetailComparator"
              label="&quot;Comparitor&quot;"
              optionLabel="VALUE.name"
              required="true"
              value="schemeWrapper.localCoverageTerm"
              valueRange="schemeWrapper.localCoverage.terms"
              valueType="acc.pc.scheme.pageprocess.SchemeDetailPageProcess.LocalCoverageTerm"/>
            <RangeCell
              editable="true"
              id="schemeDetailAction"
              label="&quot;Action&quot;"
              required="true"
              value="schemeWrapper.schemeDetail.SchemeActionType"
              valueRange="pageProcess.schemeActionTypes(schemeWrapper.schemeDetail.SchemeSourceType)"
              valueType="typekey.SchemeActionType_Ext">
              <PostOnChange/>
            </RangeCell>
            <TypeKeyCell
              available="schemeWrapper.schemeDetail.SchemeActionType == SchemeActionType_Ext.TC_VALUE"
              editable="true"
              id="schemeDetailValueType"
              label="&quot;Value Type&quot;"
              value="schemeWrapper.schemeDetail.SchemeValueType"
              valueType="typekey.SchemeValueType_Ext">
              <PostOnChange/>
            </TypeKeyCell>
            <ModalCellRef
              align="left"
              def="SchemeValueInputCell(schemeWrapper.schemeDetail)"
              editable="true"
              label="&quot;Value&quot;"
              mode="schemeWrapper.schemeDetail.SchemeValueType.Code"/>
            <TypeKeyCell
              available="schemeWrapper.schemeDetail.SchemeValueType == SchemeValueType_Ext.TC_DECIMAL"
              editable="true"
              id="Currency"
              label="&quot;Currency&quot;"
              required="false"
              value="schemeWrapper.schemeDetail.Currency"
              valueType="typekey.Currency"/>
            <TypeKeyCell
              available="schemeWrapper.schemeDetail.SchemeActionType == SchemeActionType_Ext.TC_VALUE"
              editable="true"
              id="schemeDetailValidationType"
              label="&quot;Validation Type&quot;"
              value="schemeWrapper.schemeDetail.SchemeValidationType"
              valueType="typekey.SchemeValidationType_Ext"/>
            <ButtonCell
              action="pcf.SchemeConditionDetailPopup.push(schemeWrapper.schemeDetail)"
              available="CurrentLocation.InEditMode"
              hideIfDisabled="false"
              id="Condition"
              label="&quot;Condition&quot;"
              value="schemeWrapper.schemeDetail.SchemeCondition == null ? &quot;No Condition&quot; : schemeWrapper.schemeDetail.SchemeCondition.Name"/>
          </Row>
        </RowIterator>
      </ListViewPanel>
    </PanelRef>
  </PanelSet>
</PCF>